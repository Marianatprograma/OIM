<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Formulario OIM</title>
  </head>
  <body>
    <div class="formulario">
      <label for="birthday"> Seleccione su fecha de nacimiento </label>

      <input type="date" name="birthday" id="birthday" min="1920-01-01" />

      <label for=""> Seleccione la ciudad en la que vive actualmente</label>
      <select name="city" id="city">
        <option hidden>--Seleccionar--</option>
        <option value="Miami">Miami - Estados Unidos de Norteam√©rica</option>
        <option value="Nueva York">
          Nueva York - Estados Unidos de Norteam√©rica
        </option>
        <option value="Madrid">Madrid - Espa√±a</option>
        <option value="Londres">Londres - Inglaterra</option>
        <option value="Par√≠s">Par√≠s - Francia</option>
      </select>
      <label for="status">
        Teniendo en cuenta su lugar de residencia actual, ¬øCu√°l de los
        siguientes describe su status vigente?
        <span id="light-bulb"
          >üí°
          <p id="pregunta3">
            Recuerde que la informaci√≥n ac√° registrada busca la caracterizaci√≥n
            de la di√°spora colombiana, no incide en procesos legales
            individuales
          </p>
        </span></label
      >

      <select name="status" id="status">
        <option hidden>--Seleccionar--</option>
        <option value="Visa temporal">
          Visa temporal para no imigrantes (Ej. Visa de turismo, estudio,
          negocios)
        </option>
        <option value="Residencia temporal">
          Residencia temporal (permiso de residencia de duraci√≥n determinada)
        </option>
        <option value="Residencia permanente">
          Residencia permanente (permiso ilimitado de residencia)
        </option>
        <option value="Ciudadano">Ciudadano</option>
        <option value="sin status">Sin estatus de residencia oficial</option>
        <option value="no responde">Prefiero no responder</option>
      </select>

      <div class="pregunta4">
        <label for="diaspora"
          >¬øUsted se considera parte de la di√°spora de Colombia?
          <span id="pensativa">
            ü§î
            <p id="pregunta4">
              Una di√°spora se define como los individuos y miembros de redes,
              asociaciones y comunidades, que han salido de su pa√≠s de origen,
              pero mantienen v√≠nculos con sus pa√≠ses de origen. Este concepto
              cubre a las comunidades de expatriados m√°s asentadas, los
              trabajadores migrantes que residen temporalmente en el extranjero,
              los expatriados con la nacionalidad del pa√≠s de acogida, las
              personas con doble nacionalidad y los migrantes de segunda/tercera
              generaci√≥n (OIM)
            </p>

            <!-- Prefiero que sea popUp est√° muy largo el texto -->
          </span>
        </label>
        <div class="respuesta">
          <input
            type="radio"
            name="diaspora"
            id="siDiaspora"
            value="SiDiaspora"
            onclick="showInput()"
          />
          <label for="si-diaspora">Si</label>
          <div id="elemento">
            <input type="text" id="porque" placeholder="¬øPor qu√©?" />
          </div>
        </div>
        <div class="respuesta">
          <input
            type="radio"
            name="diaspora"
            id="noDiaspora"
            value="noDiaspora"
            onclick="showInput()"
          />
          <label for="no-diaspora">No</label>
        </div>
      </div>
    </div>

    <div class="btn">
      <button onclick="comprobarEdad()">Continuar y enviar</button>
    </div>

    <div class="second">
      <div class="cajas">
        <label for="sexo">
          ¬øCu√°l es su sexo?
          <span id="interrogacion">
            ‚ùì
            <p id="pregunta5">
              Se refiere a las caracter√≠sticas gen√©ticas, endocrinas y
              morfol√≥gicas del cuerpo al nacer.
            </p>
          </span></label
        >

        <select name="sexo" id="sexo">
          <option hidden>--Seleccionar--</option>
          <option value="Hombre">Hombre</option>
          <option value="Mujer">Mujer</option>
          <option value="Intersexual">Intersexual</option>
          <option value="Prefiero no responder">Prefiero no responder</option>
        </select>
      </div>

      <div class="cajas">
        <label for="orientacion"
          >¬øCon cu√°l orientaci√≥n sexual se identifica?</label
        >
        <select name="orientacion" id="orientacion">
          <option hidden>--Seleccionar--</option>
          <option value="Heterosexual">Heterosexual</option>
          <option value="Lesbiana">Lesbiana</option>
          <option value="Gay">Gay</option>
          <option value="Bisexual">Bisexual</option>
          <option value="Bisexual">Bisexual</option>
          <option value="Queer">Queer</option>
          <option value="Prefiero no responder">Prefiero no responder</option>
        </select>
      </div>

      <div class="cajas">
        <label for="civil">¬øCu√°l es su estado civil?</label>
        <select name="civil" id="civil">
          <option hidden>--Seleccionar--</option>
          <option value="Casado(a)">Casado(a)</option>
          <option value="Uni√≥n libre">Uni√≥n libre</option>
          <option value="Soltero(a)">Soltero(a)</option>
          <option value="Viudo(a)">Viudo(a)</option>
        </select>
      </div>

      <div class="cajas">
        <label for="hijos"> ¬øCu√°ntos hijos tiene? </label>
        <div class="opciones">
          <input
            type="radio"
            name="hijos"
            id="noTengoHijos"
            value="noTengoHijos"
            onclick="ShowNewPre()"
            checked
          />
          <label for="noTengoHijos">No tengo hijos</label>
        </div>
        <div class="opciones">
          <input type="radio" name="hijos" " onclick="ShowNewPre()"
          value="1hijo"/>
          <label for="1hijo">1</label>
        </div>
        <div class="opciones">
          <input
            type="radio"
            name="hijos"
            onclick="ShowNewPre()"
            value="2hijos"
          />
          <label for="2hijos">2</label>
        </div>
        <div class="opciones">
          <input
            type="radio"
            name="hijos"
            onclick="ShowNewPre()"
            value="3hijos"
          />
          <label for="3hijos">3</label>
        </div>
        <div class="opciones">
          <input
            type="radio"
            name="hijos"
            onclick="ShowNewPre()"
            value="4hijos"
          />
          <label for="4hijos">4</label>
        </div>
        <div class="opciones">
          <input
            type="radio"
            name="hijos"
            onclick="ShowNewPre()"
            value="5hijosOmas"
          />
          <label for="5hijosOmas">5 o m√°s</label>
        </div>
      </div>
      <div id="elemento2" class="cajas">
        <label for="viven">¬ø Viven con usted?</label>
        <select name="viven" id="vivenhijos">
          <option hidden>--Seleccionar--</option>
          <option value="Si">Si</option>
          <option value="No, viven en Colombia">No, viven en Colombia</option>
          <option value="No, viven en otro pa√≠s que no es Colombia">
            No, viven en otro pa√≠s que no es Colombia
          </option>
        </select>
      </div>
      <div class="cajas">
        <label for="nivelEscolar">
          ¬øCu√°l es su √∫ltimo nivel escolar alcanzado?</label
        >
        <select name="nivelEscolar" id="nivelEscolar" onchange="prueba()">
          <option hidden>--Seleccionar--</option>
          <option id="opcionA">Primaria completa</option>
          <option>Secundaria completa</option>
          <option>T√©cnica</option>
          <option>Tecnolog√≠a</option>
          <option>Profesional</option>
          <option>Especializaci√≥n</option>
          <option>Maestr√≠a</option>
          <option>Doctorado y postdoctorado</option>
        </select>
      </div>
      <div class="cajas" id="elemento3">
        <label for="estudio">¬øCu√°l es el campo de estudio de su √∫ltimo nivel escolar alcanzado?</label>
        <select name="estudio" id="estudio">
          <option hidden>--Seleccionar--</option>
          <option value="AGRONOM√çA, VETERINARIA Y AFINES">AGRONOM√çA, VETERINARIA Y AFINES</option>
          <option value="BELLAS ARTES">BELLAS ARTES</option>
          <option value="CIENCIAS DE LA EDUCACI√ìN">CIENCIAS DE LA EDUCACI√ìN</option>
          <option value="CIENCIAS DE LA SALUD">CIENCIAS DE LA SALUD</option>
          <option value="CIENCIAS SOCIALES Y HUMANAS">CIENCIAS SOCIALES Y HUMANAS</option>
          <option value="ECONOM√çA, ADMINISTRACI√ìN, CONTADUR√çA Y AFINES">ECONOM√çA, ADMINISTRACI√ìN, CONTADUR√çA Y AFINES</option>
          <option value="INGENIER√çA, ARQUITECTURA, URBANISMO Y AFINES">INGENIER√çA, ARQUITECTURA, URBANISMO Y AFINES</option>
          <option value="MATEM√ÅTICAS Y CIENCIAS NATURALES">MATEM√ÅTICAS Y CIENCIAS NATURALES</option>

        </select>
      </div>
    </div>

    <script>
      window.onload = () => {
        const date = new Date();

        const year = date.getFullYear();

        const month = String(date.getMonth() + 1).padStart(2, "0");

        const day = String(date.getDate()).padStart(2, "0");

        const joined = [year, month, day].join("-");

        let birthday = document.getElementById("birthday");
        birthday.setAttribute("max", `${joined}`);

        document.getElementById("elemento").style.display = "none";
      };

      const showInput = () => {
        document.getElementById("siDiaspora").checked
          ? (document.getElementById("elemento").style.display = "block")
          : (document.getElementById("elemento").style.display = "none");
      };

      const comprobarEdad = () => {
        var birthday = document.getElementById("birthday").value;

        if (getAge(birthday) < 18) {
          //Dise√±ar un popUp para no mostrar los mensajes tan simples con un alert
          alert(
            "Muchas gracias por registrarte, actualmente el proceso de caracterizaci√≥n est√° dirigido a mayores de 18 a√±os. Al aceptar los t√©rminos del manejo de datos, nos permitir√°s contactarte en el futuro"
          );
        }
        {
          console.log("si es mayor de edad");
          //Enviar datos a Firebase y dejarlo continuar con el formulario.
        }
      };

      const getAge = (dateString) => {
        var ageInMilliseconds = new Date() - new Date(dateString);
        return Math.floor(ageInMilliseconds / 1000 / 60 / 60 / 24 / 365);
      };

      const ShowNewPre = () => {
        document.getElementById("noTengoHijos").checked
          ? (document.getElementById("elemento2").style.display = "none")
          : (document.getElementById("elemento2").style.display = "flex");
      };

      const prueba = () => {
        const select = document.getElementById("nivelEscolar");

        let valorOpcion = select.options[select.selectedIndex].value;

        showMore(valorOpcion);
      };

      const showMore = (selectedOption) => {

        const opt1 = "Primaria completa";
        const opt2 = "Secundaria completa";

        switch (selectedOption) {
          case opt1:
            document.getElementById("elemento3").style.display = "none";
            break;
            case opt2:
            document.getElementById("elemento3").style.display = "none";
            break;
          default:
            document.getElementById("elemento3").style.display = "flex";
        }
      };
    </script>
  </body>
</html>
